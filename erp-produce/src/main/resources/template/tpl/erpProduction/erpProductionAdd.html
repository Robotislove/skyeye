<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <link href="../../assets/lib/layui/css/layui.css" rel="stylesheet" />
    <link href="../../assets/lib/winui/css/winui.css" rel="stylesheet" />
</head>
<body>
	<div style="margin:0 auto;padding:20px;">
	    <form class="layui-form" action="" id="showForm" autocomplete="off">
	    	<div class="layui-form-item layui-col-xs12">
    			<span class="hr-title">生产计划</span><hr>
	    	</div>
	        <div class="layui-form-item layui-col-xs6">
	            <label class="layui-form-label">商品名称<i class="red">*</i></label>
	            <div class="layui-input-block">
	                <input type="text" id="productName" name="productName" win-verify="required" placeholder="请选择商品" class="layui-input" readonly="readonly"/>
	                <i class="fa fa-plus-circle input-icon" id="productNameSel"></i>
	            </div>
	        </div>
	        <div class="layui-form-item layui-col-xs6">
	            <label class="layui-form-label">销售单号</label>
	            <div class="layui-input-block">
	                <input type="text" id="salesOrder" name="salesOrder" placeholder="请选择销售单号" class="layui-input" readonly="readonly"/>
	                <i class="fa fa-plus-circle input-icon" id="salesOrderSel"></i>
	            </div>
	        </div>
	        <div class="layui-form-item layui-col-xs6">
	            <label class="layui-form-label">商品型号</label>
	            <div class="layui-input-block">
	                <input type="text" id="productModel" name="productModel" placeholder="请选择商品" class="layui-input" readonly="readonly"/>
	            </div>
	        </div>
	        <div class="layui-form-item layui-col-xs6">
	            <label class="layui-form-label">计量单位<i class="red">*</i></label>
	            <div class="layui-input-block">
	                <select id="unitList" name="unitList" lay-filter="unitList" win-verify="required">
	                	
	               	</select>
	            </div>
	        </div>
	        <div class="layui-form-item layui-col-xs6">
	            <label class="layui-form-label">计划数量<i class="red">*</i></label>
	            <div class="layui-input-block">
	                <input type="text" id="number" name="number" win-verify="required|number" placeholder="请选择计划数量" class="layui-input" value="1"/>
	            </div>
	        </div>
	        <div class="layui-form-item layui-col-xs6">
	            <label class="layui-form-label">计划开始时间<i class="red">*</i></label>
	            <div class="layui-input-block">
	                <input type="text" id="planStartDate" name="planStartDate" win-verify="required" placeholder="请选择计划开始时间" class="layui-input"/>
	            </div>
	        </div>
	        <div class="layui-form-item layui-col-xs6">
	            <label class="layui-form-label">计划结束时间<i class="red">*</i></label>
	            <div class="layui-input-block">
	                <input type="text" id="planComplateDate" name="planComplateDate" win-verify="required" placeholder="请选择计划结束时间" class="layui-input"/>
	            </div>
	        </div>
	        <div class="layui-form-item layui-col-xs6">
	            <label class="layui-form-label">单据时间<i class="red">*</i></label>
	            <div class="layui-input-block">
	                <input type="text" id="operTime" name="operTime" win-verify="required" placeholder="请选择单据时间" class="layui-input"/>
	            </div>
	        </div>
	        <div class="layui-form-item layui-col-xs12">
	            <label class="layui-form-label">备注说明</label>
	            <div class="layui-input-block">
	                <textarea id="remark" name="remark" placeholder="请输入备注说明" maxlength="200" class="layui-textarea" style="height: 100px;"></textarea>
	            </div>
	        </div>
	        <div class="layui-form-item layui-col-xs12">
    			<span class="hr-title">生产工序</span><hr>
	    	</div>
	    	<div class="layui-form-item layui-col-xs6">
		        <label class="layui-form-label">工序资料<i class="red">*</i></label>
		        <div class="layui-input-block">
		        	<button type="button" class="layui-btn layui-btn-primary layui-btn-xs" id="procedureChoose">工序选择</button>
					<button type="button" class="layui-btn layui-btn-primary layui-btn-xs" id="wayProcedureChoose">工艺选择</button>
		        	<table class="layui-table">
			    		<thead>
			    			<tr>
			    				<th>工序编号</th>
			    				<th>工序名称</th>
			    				<th>加工部门</th>
			    			</tr>
			    		</thead>
			        	<tbody id="procedureBody">
			            </tbody>
					</table>
		        </div>
		    </div>
	    	<div class="layui-form-item layui-col-xs12">
    			<span class="hr-title">生产建议</span><hr>
	    	</div>
	    	<div class="layui-form-item layui-col-xs6">
	            <label class="layui-form-label">生产方案<i class="red">*</i></label>
	            <div class="layui-input-block">
	                <select id="bomList" name="bomList" lay-filter="bomList" win-verify="required">
	                	
	               	</select>
	            </div>
	        </div>
	        <div class="layui-form-item layui-col-xs12">
	            <label class="layui-form-label">子件清单<i class="red">*</i></label>
	            <div class="layui-input-block">
	            	<div class="winui-tip alert-info" id="showInfo">
						子件清单中如包含【自产】商品，请单独下达生产计划单
					</div>
			    	<table class="layui-table">
			    		<thead>
			    			<tr>
			    				<th>商品名称</th>
			    				<th>型号</th>
			    				<th>商品分类</th>
			    				<th>商品来源</th>
			    				<th>工序</th>
			    				<th>单位所需数量</th>
			    				<th>需求数量</th>
			    				<th>库存抵扣数量</th>
			    				<th>待入库数量</th>
			    				<th>建议采购/生产数量</th>
			    			</tr>
			    		</thead>
			        	<tbody id="tBody">
			            	
			            </tbody>
					</table>
	            </div>
	        </div>
	        
	        <div class="layui-form-item layui-col-xs12">
	            <div class="layui-input-block">
	                <button class="winui-btn" id="cancle"><language showName="com.skyeye.cancel"></language></button>
	                <button class="winui-btn" lay-submit lay-filter="formAddBean"><language showName="com.skyeye.save"></language></button>
	            </div>
	        </div>
	    </form>
	</div>
	
	<script type="text/html" id="tableBody">
		{{#each rows}}
			<tr rowid="{{productId}}">
               	<td id="name{{productId}}">{{productName}}</td>
               	<td id="model{{productId}}">{{productModel}}</td>
				<td>{{categoryName}}</td>
               	<td>{{typeName}}</td>
				<td>
					{{#each procedureMationList}}
						<span class="layui-badge layui-bg-gray">{{number}}</span>{{procedureName}}<br>
					{{/each}}
				</td>
               	<td style="text-align: center;">{{needNum}}{{unitName}}</td>
				<td style="text-align: center;" id="needNum{{productId}}">{{needNum}}</td>
               	<td>{{deportAllTock}}</td>
				<td>{{beWarehousedNum}}</td>
				<td>
					<input type="text" id="proposal{{productId}}" name="proposal{{productId}}" win-verify="required|number" placeholder="请输入采购或生产数量" class="layui-input"/>
				</td>
            </tr>
		{{/each}}
    </script>
    
	<script src="../../assets/lib/layui/layui.js"></script>
   	<script src="../../assets/lib/layui/custom.js"></script>
   	
   	<script type="text/javascript">
        layui.config({base: '../../js/erpProduction/'}).use('erpProductionAdd');
    </script>
</body>
</html>